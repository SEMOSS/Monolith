<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee" xmlns:web="http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee" version="3.1">
   <display-name>Monolith_Dev</display-name>
   <welcome-file-list>
      <welcome-file>index.html</welcome-file>
   </welcome-file-list>
   
   <!-- security filters for admin page -->
   <filter>
      <filter-name>NoUserExistsFilter</filter-name>
      <filter-class>prerna.web.conf.NoUserExistsFilter</filter-class>
   </filter>
   <filter-mapping>
      <filter-name>NoUserExistsFilter</filter-name>
      <url-pattern>/api/*</url-pattern>
   </filter-mapping>
   <filter>
      <filter-name>CACFilter</filter-name>
      <filter-class>prerna.web.conf.CACFilter</filter-class>
      <init-param>
			<param-name>autoAdd</param-name>
			<param-value>true</param-value>
	  </init-param>
   </filter>
   <filter-mapping>
      <filter-name>CACFilter</filter-name>
      <url-pattern>/api/*</url-pattern>
   </filter-mapping>
   <filter>
      <filter-name>NoUserInSessionFilter</filter-name>
      <filter-class>prerna.web.conf.NoUserInSessionFilter</filter-class>
   </filter>
   <filter-mapping>
      <filter-name>NoUserInSessionFilter</filter-name>
      <url-pattern>/api/*</url-pattern>
   </filter-mapping>
   <!-- filter on the admin servlet -->
   <filter>
      <filter-name>AdminStartupFilter</filter-name>
      <filter-class>prerna.web.conf.AdminStartupFilter</filter-class>
   </filter>
    <filter-mapping>
      <filter-name>AdminStartupFilter</filter-name>
      <url-pattern>/adminconfig/*</url-pattern>
   </filter-mapping>
   
   <!--  Waffle it !! 
	<filter>
		<filter-name>SecurityFilter</filter-name>
		<filter-class>waffle.servlet.NegotiateSecurityFilter</filter-class>
		<init-param>
			<param-name>principalFormat</param-name>
			<param-value>fqn</param-value>
		</init-param>
		<init-param>
			<param-name>roleFormat</param-name>
			<param-value>both</param-value>
		</init-param>
		<init-param>
			<param-name>allowGuestLogin</param-name>
			<param-value>true</param-value>
		</init-param>
		<init-param>
			<param-name>impersonate</param-name>
			<param-value>true</param-value>
		</init-param>
		<init-param>
			<param-name>securityFilterProviders</param-name>
			<param-value>
	          waffle.servlet.spi.BasicSecurityFilterProvider
	          waffle.servlet.spi.NegotiateSecurityFilterProvider
	      </param-value>
		</init-param>
		<init-param>
			<param-name>securityFilterProviders</param-name>
			<param-value>
	          waffle.servlet.spi.BasicSecurityFilterProvider
	          waffle.servlet.spi.NegotiateSecurityFilterProvider
	      </param-value>
		</init-param>
		<init-param>
			<param-name>waffle.servlet.spi.NegotiateSecurityFilterProvider/protocols</param-name>
			<param-value>
	          Negotiate
	          NTLM
	      </param-value>
		</init-param>
	</filter>
	<filter-mapping>
		<filter-name>SecurityFilter</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping>
	End Waffle -->
	<!--
   <absolute-ordering>
      <name>UserDBInsightFilter</name>
      <name>UserDBFilter</name>
   </absolute-ordering>
   -->
   
   <!-- servlets -->
   <servlet>
      <servlet-name>MainApplication</servlet-name>
      <servlet-class>org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher</servlet-class>
      <init-param>
         <param-name>javax.ws.rs.Application</param-name>
         <param-value>prerna.semoss.web.app.MonolithApplication</param-value>
      </init-param>
      <init-param>
	     <param-name>resteasy.servlet.mapping.prefix</param-name>
	     <param-value>/api</param-value>
	  </init-param>
   </servlet>
   <servlet-mapping>
      <servlet-name>MainApplication</servlet-name>
      <url-pattern>/api/*</url-pattern>
   </servlet-mapping>
   <servlet>
      <servlet-name>AdminApplication</servlet-name>
      <servlet-class>org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher</servlet-class>
      <init-param>
         <param-name>javax.ws.rs.Application</param-name>
         <param-value>prerna.semoss.web.app.AdminApplication</param-value>
      </init-param>
   </servlet>
   <servlet-mapping>
      <servlet-name>AdminApplication</servlet-name>
      <url-pattern>/adminconfig/*</url-pattern>
   </servlet-mapping>

   <!-- context params -->
   <context-param>
      <param-name>isLog4jAutoInitializationDisabled</param-name>
      <param-value>false</param-value>
   </context-param>
   <context-param>
      <param-name>security-enabled</param-name>
      <param-value>false</param-value>
   </context-param>
   <context-param>
      <description>Location to store uploaded file</description>
      <param-name>file-upload</param-name>
      <param-value>C:\\workspace\\Semoss\\</param-value>
   </context-param>
   <context-param>
      <description>Temporary - Location to store uploaded file</description>
      <param-name>temp-file-upload</param-name>
      <param-value>C:\\Temp</param-value>
   </context-param>
   <context-param>
      <description>The place where the core RDF Map gets picked from</description>
      <param-name>RDF-MAP</param-name>
      <param-value>C:\\workspace\\Semoss\\RDF_Map.prop</param-value>
   </context-param>  
   <!-- listeners -->
   <listener>
      <listener-class>prerna.web.conf.DBLoader</listener-class>
   </listener>
   <listener>
      <listener-class>prerna.web.conf.UserDBLoader</listener-class>
   </listener>
   <session-config>
      <session-timeout>30</session-timeout>
   </session-config>
</web-app>